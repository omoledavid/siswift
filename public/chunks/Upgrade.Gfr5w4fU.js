import{_ as v,b as e,e as g,w as b,r as p,o as r,d as n,F as i,h,n as t,t as d,f as y}from"../entry/index.wkIW-Yay.js";const k={data(){return{plans:[],active:null,selectedPlan:null,loading:!1}},methods:{getPlans(){this.loading=!0,this.$config.getPlans().then(l=>{console.log(l),this.plans=l.plans}).finally(()=>{this.loading=!1})},getCurrentSubscription(){this.$config.getSubscription().then(l=>{console.log(l.subscription),this.$store.commit("auth/setSubscription",l.subscription)})},subscribe(){let l={plan_id:this.selectedPlan.id,gateway:"paystack",callback_url:window.location.origin+"/app/success",amount:Number(this.selectedPlan.price)};console.log(l),this.$config.subscribeToPlan(l).then(c=>{console.log(c),this.getCurrentSubscription()})},selectPlan(l){this.active=this.active?this.active==(l==null?void 0:l.slug)?null:l==null?void 0:l.slug:l.slug,this.selectedPlan=this.selectedPlan&&this.selectedPlan==l?null:l}},watch:{subscription:{handler(l){l&&(console.log(l.slug,"ommmmo"),this.active=l.slug)},immediate:!0}},beforeMount(){this.getPlans(),this.getCurrentSubscription()},computed:{subscription(){return this.$store.getters["auth/getSubscription"]}}},P={class:"lg:page-bg md:page-bg"},C={class:"grid grid-cols-3 w-full gap-4"},w={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-4"},S=["onClick"],N={class:"font-semibold text-[13px]"},$={class:"font-semibold text-[20px]"},B={class:"text-[12px]"},F={class:"flex flex-col gap-1 mt-[4px]"};function V(l,c,z,T,o,u){const _=p("el-skeleton-item"),x=p("i-icon"),f=p("el-skeleton");return r(),e("div",P,[g(f,{loading:o.loading,animated:""},{template:b(()=>[n("div",null,[n("div",C,[(r(),e(i,null,h(3,s=>n("div",{class:"",key:s},[g(_,{variant:"image",style:{height:"400px","border-radius":"4px"}})])),64))])])]),default:b(()=>[n("div",w,[(r(!0),e(i,null,h(o.plans,s=>(r(),e("div",{key:s==null?void 0:s.id,onClick:a=>u.selectPlan(s),role:"button",class:t(["border border-[2px] p-4 rounded-[10px]",o.active===(s==null?void 0:s.slug)?"border-primary":"border-gray-300"])},[n("h5",N,d(JSON.parse(s==null?void 0:s.name).en),1),n("h1",null,[n("span",$,d((s==null?void 0:s.price)=="0.00"?"Free":`${s==null?void 0:s.currency} ${s==null?void 0:s.price}`),1),n("span",B,d((s==null?void 0:s.price)=="0.00"?"":`/${s==null?void 0:s.invoice_period}${s==null?void 0:s.invoice_interval}`),1)]),n("ul",F,[(r(!0),e(i,null,h(s==null?void 0:s.features,a=>(r(),e("li",{key:a.id,class:t(["capitalize text-[13px] flex gap-[4px] items-center",o.active===(s==null?void 0:s.slug)?"text-gray-700":"text-gray-500"])},[g(x,{icon:"ic:round-check-box",class:t([o.active===(s==null?void 0:s.slug)?"text-primary":"text-gray-500"])},null,8,["class"]),y(" "+d(a.name.split("_").join(" ")),1)],2))),128))]),n("button",{class:t(["brand-btn-md w-full mt-4",o.active===(s==null?void 0:s.slug)?"brand-primary":"bg-gray-400 border border-gray-400"]),onClick:c[0]||(c[0]=(...a)=>u.subscribe&&u.subscribe(...a))}," Upgrade ",2)],10,S))),128))])]),_:1},8,["loading"])])}const D=v(k,[["render",V]]);export{D as default};
