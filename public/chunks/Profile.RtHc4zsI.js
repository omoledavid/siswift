import{_ as g,x as h,b as u,d as e,e as m,t as c,G as x,s as a,v as d,n as b,A as _,r as y,o as p}from"../entry/index.R2o0HwGI.js";const v={data(){return{form:{firstname:"",lastname:"",mobile:"",address:"",image:""},isLoading:!1,isUploading:!1,image:h}},methods:{editProfile(){this.isLoading=!0;const s=new FormData;s.append("_method","PUT"),s.append("firstname",this.form.firstname),s.append("lastname",this.form.lastname),s.append("email",this.form.email),s.append("mobile",this.form.phone),s.append("address",this.form.address),this.$auth.updateProfile(s,this.user.id).then(t=>{console.log("register res:",t),this.getUser()}).finally(()=>{this.isLoading=!1})},uploadPhoto(){let t=event.target.files[0];this.isUploading=!0;const n=new FormData;n.append("_method","PUT"),n.append("firstname",this.form.firstname),n.append("lastname",this.form.lastname),n.append("image",t),this.$auth.updateProfile(n,this.user.id).then(f=>{console.log("register res:",f),this.getUser()}).finally(()=>{this.isUploading=!1})},getUser(){this.$auth.getProfile().then(s=>{console.log(s.profile),this.$store.commit("auth/setUser",s.profile)})}},watch:{user:{handler(s){this.form={firstname:s.firstname,lastname:s.lastname,mobile:s.mobile,address:s.address.address}},immediate:!0}},computed:{user(){return this.$store.getters["auth/getUser"]}}},U={class:"lg:page-bg md:page-bg lg:w-6/12 md:w-7/12 w-full mx-auto mt-6"},w={class:"flex items-center flex-col mb-3"},P={class:"relative"},V=["src"],k={for:"fileInput",class:"file-label mb-0 flex flex-col items-center bg-primary text-white p-[8px] rounded-full absolute right-0 bottom-0"},L={class:"font-semibold"},N={class:"flex lg:flex-row md:flex-row flex-col gap-[8px]"},j=e("label",{for:""},"First Name",-1),C=e("label",{for:""},"Last Name",-1),B=e("label",{for:""},"Phone Number",-1),D=e("label",{for:""},"Home Address",-1),F={class:"text-center mt-2"},T=["disabled"],A={key:1},I=e("div",{class:"mt-3"},null,-1),M=e("h4",{class:"font-semibold mt-3"},"Verification",-1),S={class:"font-medium text-sm flex gap-2 items-center"},z={class:"flex flex-col"},E=e("span",null,"KYC Verification",-1),G={class:"text-xs text-gray-500"};function H(s,t,n,f,o,l){const r=y("i-icon");return p(),u("div",null,[e("div",U,[e("div",w,[e("div",P,[e("img",{src:l.user.image?s.imgUrl+"user/profile/"+l.user.image:o.image,class:"w-[80px] h-[80px] border-2 p-[2px] border-gray-100 rounded-full object-fit object-top"},null,8,V),e("input",{type:"file",name:"file",id:"fileInput",class:"hidden-input",ref:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:t[0]||(t[0]=(...i)=>l.uploadPhoto&&l.uploadPhoto(...i))},null,544),e("label",k,[m(r,{icon:o.isUploading?"line-md:downloading-loop":"lucide:images",class:"text-[15px]"},null,8,["icon"])])]),e("h4",L,c(`${o.form.firstname} ${o.form.lastname}`),1)]),e("form",{class:"flex flex-col gap-[8px]",onSubmit:t[5]||(t[5]=x((...i)=>l.editProfile&&l.editProfile(...i),["prevent"]))},[e("div",N,[e("div",null,[j,a(e("input",{type:"text",class:"input","onUpdate:modelValue":t[1]||(t[1]=i=>o.form.firstname=i)},null,512),[[d,o.form.firstname]])]),e("div",null,[C,a(e("input",{type:"text",class:"input","onUpdate:modelValue":t[2]||(t[2]=i=>o.form.lastname=i)},null,512),[[d,o.form.lastname]])])]),e("div",null,[B,a(e("input",{type:"text",class:"input","onUpdate:modelValue":t[3]||(t[3]=i=>o.form.mobile=i)},null,512),[[d,o.form.mobile]])]),e("div",null,[D,a(e("input",{type:"text",class:"input","onUpdate:modelValue":t[4]||(t[4]=i=>o.form.address=i)},null,512),[[d,o.form.address]])]),e("div",F,[e("button",{class:b(["brand-btn w-8/12",[o.isLoading?"bg-gray1 text-gray":"brand-primary"]]),disabled:o.isLoading},[o.isLoading?(p(),_(r,{key:0,icon:"eos-icons:three-dots-loading",class:"text-xl text-gray2"})):(p(),u("span",A," Update "))],10,T)]),I],32),M,e("span",{class:"border border-dashed border-primary block p-2 rounded-md flex justify-between items-center",role:"button",onClick:t[6]||(t[6]=i=>s.$router.push("/app/kyc"))},[e("span",S,[m(r,{icon:"teenyicons:diamond-solid",class:"text-primary"}),e("div",z,[E,e("span",G,c(l.user.kyc_data?"Verified":"Not Verified"),1)])]),m(r,{icon:"prime:angle-right",class:"text-[25px]"})])])])}const Y=g(v,[["render",H]]);export{Y as default};
