import{_,q as b,s as d,z as x,b as v,d as e,e as a,w as u,r as m,o as S,G as V,n as y}from"../entry/index.wkIW-Yay.js";import{M as I}from"./mainPhoto.D2jeKzOq.js";const M={components:{MainPhoto:I},data(){return{isLoading:!1,currentSchema:b({name:d().required(),address:d().required(),phone:d().required().matches(/^[0-9]+$/,"Must be numeric"),description:d().required()}),mainImage:null,form:{name:null,phone:null,address:null,meta_description:null}}},methods:{createShop(s){const t=x();if(!this.mainImage||Object.keys(this.mainImage).length==0){t.error("Add Store Image",{timeout:4e3});return}const r=new FormData;let p=this.user.seller_id?`/shops/${this.shop.id}`:"/shops";this.user.seller_id&&r.append("_method","put"),r.append("name",s.name),r.append("phone",s.phone),r.append("address",s.address),r.append("meta_description",s.description),r.append("image",this.mainImage),this.$config.createStore(r,p).then(o=>(this.$router.push("/app/my-store"),o))},getUser(){this.$auth.getProfile().then(s=>{console.log(s.profile),this.$store.commit("auth/setUser",s.profile)})},getShop(){this.$user.showShop().then(s=>{console.log(s),s.length>0?(this.shop=s[0],this.$route.name==="app-store-edit"&&(this.form={name:this.shop.name,phone:this.shop.phone,address:this.shop.address,meta_description:this.shop.meta_description})):this.shop={}})},uploadMainImage(s){this.mainImage=s}},beforeMount(){this.getUser(),this.getShop()},computed:{user(){return this.$store.getters["auth/getUser"]}}},U={class:"grid lg:grid-cols-3 md:grid-cols-3 gap-4"},w={class:"lg:page-bg md:page-bg h-fit w-full"},k={class:"lg:page-bg md:page-bg lg:col-span-2 md:col-span-2"},q={class:"flex flex-col gap-2"},F=e("label",{for:""},"Shop Name",-1),P={class:"input-field"},E=e("label",{for:""},"Phone Number",-1),L=e("label",{for:""},"Store Description",-1),N=e("label",{for:""},"Address",-1),B={class:"mt-6"},C=["disabled"];function z(s,t,r,p,o,h){const g=m("main-photo"),l=m("vField"),i=m("ErrorMessage"),f=m("vForm");return S(),v("div",U,[e("div",w,[a(g,{onUploadMainImage:h.uploadMainImage,uploadLabel:"Store Photo"},null,8,["onUploadMainImage"])]),e("div",k,[e("div",null,[a(f,{class:"flex flex-col",onSubmit:h.createShop,"validation-schema":o.currentSchema,"keep-values":""},{default:u(({meta:c})=>[e("div",q,[e("div",null,[a(l,{name:"name",modelValue:o.form.name,"onUpdate:modelValue":t[0]||(t[0]=n=>o.form.name=n),class:"input"},{default:u(({field:n})=>[F,e("div",P,[e("input",V({type:"text",name:"name",class:"w-full",id:"name",placeholder:"Enter shop name"},n),null,16)])]),_:1},8,["modelValue"]),a(i,{name:"name",class:"text-xs text-error"})]),e("div",null,[E,a(l,{type:"tel",modelValue:o.form.phone,"onUpdate:modelValue":t[1]||(t[1]=n=>o.form.phone=n),name:"phone",class:"input",placeholder:"08012345678"},null,8,["modelValue"]),a(i,{name:"phone",class:"text-xs text-error"})]),e("div",null,[L,a(l,{name:"description",modelValue:o.form.meta_description,"onUpdate:modelValue":t[2]||(t[2]=n=>o.form.meta_description=n),as:"textarea",class:"input",cols:"30",rows:"4"},null,8,["modelValue"]),a(i,{name:"description",class:"text-xs text-error"})]),e("div",null,[N,a(l,{name:"address",modelValue:o.form.address,"onUpdate:modelValue":t[3]||(t[3]=n=>o.form.address=n),type:"text",class:"input"},null,8,["modelValue"]),a(i,{name:"address",class:"text-xs text-error"})])]),e("div",B,[e("button",{disabled:o.isLoading||!c.valid,class:y([[o.isLoading?"bg-gray1 text-gray":c.valid?"brand-primary bg-primary":"bg-gray-400 text-black1"],"brand-btn w-full"]),type:"submit"}," Submit ",10,C)])]),_:1},8,["onSubmit","validation-schema"])])])])}const $=_(M,[["render",z]]);export{$ as default};
