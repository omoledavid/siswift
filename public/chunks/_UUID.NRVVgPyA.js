import{_ as at,l as dt,b as h,e as n,w as et,r as _,o as d,d as e,F as st,h as it,A as ct,k as m,t as c,n as ut,f as g,y as ht,v as pt,x as mt,B as gt,C as xt}from"../entry/index.wkIW-Yay.js";const _t={props:{productID:Number,isMyStore:{type:Boolean,default:!1}},data(){return{ID:this.$route.params.id,item:{},loading:!1,activeTab:"description",image:dt,quantity:1,displayContact:!1,wishlistItems:[],amount:1,suggest:[]}},methods:{filterFunc(){this.isFilterOpen=!this.isFilterOpen},showProduct(t){this.$router.push(`/app/product/${t==null?void 0:t.id}`)},showContact(){this.displayContact=!this.displayContact},sponsorFunction(){this.item.is_featured?this.$router.push(`/app/product/${this.ID}/sponsored-analysis`):this.$router.push(`/app/product/${this.ID}/sponsor-listing`)},redirectToMessages(t){let s="";function a(){return window.matchMedia("(max-width: 767px)").matches}a()?(console.log("You are using a mobile device"),s=`/app/message/m?chatId=${t}`):(console.log("You are using a desktop device"),s=`/app/messages/?chatId=${t}`),this.$router.push(s)},startChat(){let t={product_id:this.ID};this.$user.startConversation(t).then(s=>{let a=s.conversation.id;this.redirectToMessages(a)})},getWishlist(){this.loading=!0,this.$user.wishList().then(t=>{let s=t.wishlist,a=[];s.forEach(u=>{let i={...u.product,wishlist_id:u.id,offer_price:u.offer_price,quantity:u.quantity,session_id:u.session_id,status:u.status};a.push(i)}),this.wishlistItems=a}).finally(()=>{this.loading=!1})},async onShare(){try{await navigator.share({title:`Checkout my amazing product at ${this.windowOrigin}`,text:"",url:this.productLink})}catch(t){alert(t)}},getProduct(){this.loading=!0,this.$products.getRecord(this.ID).then(t=>{var s;this.item=t.data,this.suggest=t.suggest,this.amount=((s=this.item)==null?void 0:s.base_price)*this.quantity}).finally(()=>{this.loading=!1})},getUser(){this.$auth.getProfile().then(t=>t)},makeOffer(){this.$router.push(`/app/make-offer/${this.ID}`)},addToCart(){let t={product_id:this.ID,quantity:this.quantity,offer_price:this.item.base_price};this.$user.addToCart(t).then(s=>(this.$store.commit("auth/setCartCount"),this.$router.push("/app/my-cart"),s)),console.log(t)},wishlistFunc(){this.wishlist_item.length!==0?this.removeWishlistItem():this.addToWishlist()},removeWishlistItem(){console.log(this.wishlist_item[0]),this.$user.removeFromWishlist(this.wishlist_item[0].wishlist_id).then(t=>{console.log(t),this.getWishlist(),this.getProduct()})},addToWishlist(){let t={product_id:this.ID,quantity:this.quantity,offer_price:this.item.base_price};this.$user.addToWishlist(t).then(s=>(this.$router.push("/app/my-favourites"),s))},removeFromCart(t){this.$user.removeFromCart(t).then(s=>s)},goToSeller(){var u;let t=(u=this.item)==null?void 0:u.shop,a=`${t==null?void 0:t.user.firstname}-${t==null?void 0:t.user.lastname}`.toLowerCase();this.$router.push(`/app/product/${a}/seller/${t.user_id}`)},editItem(){this.$router.push(`/app/product/${this.ID}/edit`)}},beforeMount(){this.getProduct(),this.getUser(),this.getWishlist()},watch:{"$route.params.id":{handler(t,s){t!==s&&(this.ID=t,this.getProduct())},immediate:!0},quantity:{handler(t){var s;this.amount=((s=this.item)==null?void 0:s.base_price)*t,t>this.item.track_inventory&&(this.$toast.error("Quantity cannot be above quantity available",{timeout:4e3}),this.quantity=1)},immediate:!1},productID:{handler(t){t&&(this.ID=t,this.getProduct())},immediate:!0}},computed:{user(){return this.$store.getters["auth/getUser"]},isMyProduct(){let t="";return this.item.shop&&(t=this.user.id==this.item.shop.user_id),t},windowOrigin(){return window.location.origin},productLink(){return`${this.windowOrigin}/app/product/${this.ID}`},wishlist_item(){return this.wishlistItems.filter(a=>this.ID==a.id)},bulk(){var t;return this.item.bulk_price==null?[]:JSON.parse(this.item.bulk_price).length===0?[]:JSON.parse((t=this.item)==null?void 0:t.bulk_price)},images(){var s,a,u;if(Object.keys(this.item).length>0){let i=[],o=this.item?(s=this.item)==null?void 0:s.product_images:[];for(let l=0;l<o.length;l++)i.push({id:l+1,src:this.imgUrl+"product/"+((a=this.item)==null?void 0:a.product_images[l].image),isLink:!1});var t=[{id:0,src:this.imgUrl+"product/"+((u=this.item)==null?void 0:u.main_image),isLink:!1},...i]}return t}}},p=t=>(gt("data-v-3c008753"),t=t(),xt(),t),ft={class:"body-content w-full"},bt={class:"lg:page-bg md:page-bg"},yt={class:"flex justify-between gap-12 mb-3"},wt={class:"grid grid-cols-3 w-full gap-4"},kt={class:"flex gap-4"},vt={class:"lg:page-bg md:page-bg"},Ct={class:"mt-4"},It={class:"flex gap-2 items-center justify-end"},Dt={class:"mt-4 flex flex-col gap-1"},Pt={class:"text-[13px] block"},St=p(()=>e("b",null,"Brand:",-1)),Tt={class:"font-semibold"},Ft={class:"font-bold text-xl text-primary"},Mt={class:"flex flex-col gap-[5px]"},qt={class:"text-[12px] block w-fit"},Lt={class:"flex flex-col gap-2 mt-2"},Ot={key:0,class:"text-[11px] block bg-primary text-white w-fit rounded-sm px-[6px] py-[2px] block"},jt={class:"text-[13px] block"},Wt=p(()=>e("b",null,"RAM:",-1)),Bt={key:1,class:"text-[13px] block"},Ut=p(()=>e("b",null,"SIM:",-1)),At={class:"flex gap-[7px] text-sm items-center"},Nt=p(()=>e("b",null,"Color:",-1)),Vt=p(()=>e("span",{class:"flex gap-2"},null,-1)),zt=p(()=>e("h4",{class:"font-semibold text-[13px]"},"Description",-1)),Et=["innerHTML"],Rt=p(()=>e("hr",{class:"my-[4px]"},null,-1)),Ht={class:"text-[13px] flex gap-[3px] items-center"},Jt=p(()=>e("hr",{class:"my-4"},null,-1)),Yt={key:0,class:"flex justify-between items-center"},Qt={class:"font-bold text-primary"},Gt={key:1,class:"flex lg:flex-row md:flex-row flex-col items-start justify-between gap-3"},Kt={class:"flex gap-2 mb-3"},Xt=["src"],Zt={class:"flex flex-col"},$t={class:"text-[12px] text-gray-400"},te={class:"flex gap-3 items-center"},ee={key:0},se=["href"],ie={class:"flex lg:flex-row md:flex-row flex-col lg:w-fit md:w-fit w-full gap-2"},oe=["disabled"],re={class:"mt-4"},ne=p(()=>e("h4",{class:"font-semibold text-lg"},"Similar Listings",-1)),le={class:"mt-4"};function ae(t,s,a,u,i,o){const l=_("el-skeleton-item"),ot=_("wxCarousel"),x=_("i-icon"),rt=_("wxProductCard"),nt=_("el-skeleton");return d(),h("div",ft,[n(nt,{loading:i.loading,animated:""},{template:et(()=>[e("div",bt,[n(l,{variant:"image",style:{height:"200px","margin-bottom":"20px","border-radius":"10px"}}),e("div",yt,[e("div",wt,[(d(),h(st,null,it(3,f=>e("div",{class:"",key:f},[n(l,{variant:"image",style:{height:"50px","border-radius":"4px"}})])),64))]),e("span",kt,[n(l,{variant:"text",style:{height:"50px",width:"50px","border-radius":"10px"}}),n(l,{variant:"text",style:{height:"50px",width:"50px","border-radius":"10px"}})])]),e("div",null,[n(l,{variant:"text",style:{height:"10px","border-radius":"10px"}}),n(l,{variant:"text",style:{height:"10px","border-radius":"10px"}}),n(l,{variant:"text",style:{height:"10px","border-radius":"10px"}}),n(l,{variant:"text",style:{height:"10px","border-radius":"10px"}}),n(l,{variant:"text",style:{height:"10px","border-radius":"10px"}}),n(l,{variant:"text",style:{height:"10px","border-radius":"10px"}}),n(l,{variant:"text",style:{height:"10px","border-radius":"10px"}})])])]),default:et(()=>{var f,b,y,w,k,v,C,I,D,P,S,T,F,M,q,L,O,j,W,B,U,A,N,V,z,E,R,H,J,Y,Q,G,K,X,Z,$,tt;return[e("div",null,[e("div",vt,[i.item?(d(),ct(ot,{key:0,imagesProps:o.images},null,8,["imagesProps"])):m("",!0),e("div",Ct,[e("span",It,[o.isMyProduct?(d(),h("span",{key:0,onClick:s[0]||(s[0]=(...r)=>o.sponsorFunction&&o.sponsorFunction(...r)),role:"button",class:"bg-accent p-2 rounded-md whitespace-nowrap block text-primary text-xs font-semibold"},c((f=i.item)!=null&&f.is_featured?"Check Sponsored Analysis":"Sponsor Listing"),1)):m("",!0),o.isMyProduct?m("",!0):(d(),h("button",{key:1,onClick:s[1]||(s[1]=(...r)=>o.wishlistFunc&&o.wishlistFunc(...r)),class:ut(["p-2 rounded-md  text-lg",o.wishlist_item.length!==0?"bg-gray-200 text-gray-700":"bg-accent text-primary"])},[n(x,{icon:"ph:heart-fill"})],2)),o.isMyProduct?m("",!0):(d(),h("span",{key:2,class:"bg-accent p-2 rounded-md text-primary text-lg",role:"button",onClick:s[2]||(s[2]=r=>t.$router.push("/app/support/report"))},[n(x,{icon:"material-symbols:report"})])),e("button",{onClick:s[3]||(s[3]=(...r)=>o.onShare&&o.onShare(...r)),class:"bg-accent p-2 rounded-md text-primary text-lg"},[n(x,{icon:"ic:baseline-share"})])])]),e("div",Dt,[e("span",Pt,[St,g(" "+c((y=(b=i.item)==null?void 0:b.brand)==null?void 0:y.name),1)]),e("h4",Tt,c(`${(w=i.item)==null?void 0:w.name}`),1),e("h4",Ft,c(`${t.$currencyFormat(i.amount)}`),1),e("div",Mt,[(d(!0),h(st,null,it(o.bulk,(r,lt)=>(d(),h("div",{class:"bg-accent p-[6px] w-fit",key:lt},[e("span",qt,[e("b",null,c(`From ${r.qty} pieces:`),1),g(" "+c(`${t.$currencyFormat(r.price)}/piece`),1)])]))),128))]),e("div",Lt,[(k=i.item)!=null&&k.condition?(d(),h("span",Ot,c((v=i.item)==null?void 0:v.condition.split("-").join(" ")),1)):m("",!0),e("span",jt,[Wt,g(" "+c((C=i.item)==null?void 0:C.ram),1)]),(I=i.item)!=null&&I.sim?(d(),h("span",Bt,[Ut,g(" "+c((D=i.item)==null?void 0:D.sim.split("_").join(" ")),1)])):m("",!0),e("span",At,[Nt,e("span",{class:"block w-4 h-4 p-2 cursor-pointer rounded-full ring-2 ring-offset-2 ring-primary",style:ht({backgroundColor:(P=i.item)==null?void 0:P.colour})},null,4)]),Vt]),e("div",null,[e("span",null,[zt,e("div",{class:"text-xs",innerHTML:(S=i.item)==null?void 0:S.description},null,8,Et)])]),Rt,e("div",null,[e("span",Ht,[n(x,{icon:"tabler:location-filled",class:"text-secondary text-sm"}),g(" "+c(((T=i.item)==null?void 0:T.state)==="AkwaIbom"?`${(F=i.item)==null?void 0:F.lga}, Akwa Ibom`:`${(M=i.item)==null?void 0:M.lga}, ${(q=i.item)==null?void 0:q.state}`),1)]),Jt,o.isMyProduct?(d(),h("div",Yt,[e("h4",Qt,c(t.$currencyFormat((L=i.item)==null?void 0:L.base_price)),1),e("button",{class:"brand-btn-md brand-primary px-8",onClick:s[4]||(s[4]=(...r)=>o.editItem&&o.editItem(...r))},"Edit")])):m("",!0),o.isMyProduct?m("",!0):(d(),h("div",Gt,[e("div",null,[e("div",Kt,[e("img",{src:(W=(j=(O=i.item)==null?void 0:O.shop)==null?void 0:j.user)!=null&&W.image?t.imgUrl+"user/profile/"+((U=(B=i.item)==null?void 0:B.shop)==null?void 0:U.user.image):i.image,class:"w-[45px] h-[45px] border-2 p-[2px] border-gray-100 rounded-full object-fit object-top"},null,8,Xt),e("span",Zt,[e("span",{class:"text-[14px] font-semibold",role:"button",onClick:s[5]||(s[5]=(...r)=>o.goToSeller&&o.goToSeller(...r))},c(`${(V=(N=(A=i.item)==null?void 0:A.shop)==null?void 0:N.user)==null?void 0:V.firstname} ${(R=(E=(z=i.item)==null?void 0:z.shop)==null?void 0:E.user)==null?void 0:R.lastname}`),1),e("span",$t,c(`joined Siswift ${t.$formatRelativeTime((Y=(J=(H=i.item)==null?void 0:H.shop)==null?void 0:J.user)==null?void 0:Y.created_at)}`),1)])]),e("span",te,[i.displayContact?(d(),h("span",ee,[e("a",{class:"flex items-center gap-[5px] text-sm font-semibold",href:`tel:${(K=(G=(Q=i.item)==null?void 0:Q.shop)==null?void 0:G.user)==null?void 0:K.mobile}`},[n(x,{icon:"solar:phone-bold",class:"form-icon text-gray-600"}),g(" "+c(($=(Z=(X=i.item)==null?void 0:X.shop)==null?void 0:Z.user)==null?void 0:$.mobile),1)],8,se)])):(d(),h("button",{key:1,class:"brand-btn-md brand-primary flex items-center gap-[6px]",onClick:s[6]||(s[6]=(...r)=>o.showContact&&o.showContact(...r))},[n(x,{icon:"solar:phone-bold",class:"form-icon text-white"}),g(" Show Contact ")])),e("button",{class:"brand-btn-md brand-outline",onClick:s[7]||(s[7]=(...r)=>o.startChat&&o.startChat(...r))}," Start a chat ")])]),e("div",ie,[pt(e("input",{type:"text","onUpdate:modelValue":s[8]||(s[8]=r=>i.quantity=r),disabled:((tt=i.item)==null?void 0:tt.track_inventory)<=1,class:"input lg:w-[80px] md:w-[100px] w-full"},null,8,oe),[[mt,i.quantity]]),e("button",{class:"brand-btn-md brand-primary whitespace-nowrap",onClick:s[9]||(s[9]=(...r)=>o.addToCart&&o.addToCart(...r))}," Add to Cart "),e("button",{class:"brand-btn-md brand-outline whitespace-nowrap",onClick:s[10]||(s[10]=(...r)=>o.makeOffer&&o.makeOffer(...r))}," Make an offer ")])]))])])]),e("div",re,[ne,e("div",le,[n(rt,{loading:i.loading,products:i.suggest,hasButton:!1,iconType:"mdi:marketplace-outline",emptyText:"No product Found, try again ðŸ˜¥",onViewProduct:o.showProduct},null,8,["loading","products","onViewProduct"])])])])]}),_:1},8,["loading"])])}const ce=at(_t,[["render",ae],["__scopeId","data-v-3c008753"]]);export{ce as default};
