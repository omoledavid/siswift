import{_ as b,b as n,d as e,F as _,h,n as y,t as a,v,x as k,e as m,w as I,r as f,o as r,k as g,f as p,B as w,C as D}from"../entry/index.wkIW-Yay.js";const C={data(){return{ID:this.$route.params.disputeID,orderID:this.$route.params.ID,item:{},itemData:{},content:"",image:"",visible:!1,previewImage:null}},methods:{getRecord(){this.$orders.viewDispute(this.ID).then(t=>{console.log(t),this.item=t.data;let s=t.data;this.itemData={orderID:s.order_id,user:s.buyer.id==this.user.id?`${s.seller.firstname} ${s.seller.lastname}`:`${s.buyer.firstname} ${s.buyer.lastname}`,transaction_amount:this.$currencyFormat(s.amount),return_reason:s.reason,return_detail:s.desc,additional_information:s.add_info}})},postReply(){let t=new FormData;t.append("reason",this.content),t.append("refund_id",this.ID),t.append("image",this.image),this.$orders.replyDispute(this.orderID,t).then(s=>{console.log(s),this.getRecord(),this.content="",this.image=null})},removeImage(){this.image=null},onChange(){let t=this.$refs.file.files;this.image=t[0],console.log(this.image,"from:photo Upload")},formattedImageSize(t){return t<1024?`${t.size.toFixed(2)} Bytes`:t.size<1048576?`${(t.size/1024).toFixed(2)} KB`:`${(t.size/1048576).toFixed(2)} MB`},openModal(t){console.log(t.image),this.previewImage=t.image,this.visible=!0}},beforeMount(){this.getRecord()},computed:{user(){return this.$store.getters["auth/getUser"]}}},l=t=>(w("data-v-3e04b9e8"),t=t(),D(),t),R={class:"flex lg:flex-row flex-col md:flex-row gap-3 w-full items-start"},z={class:"bg-white lg:w-[250px] md:w-[250px] w-full rounded-md"},B=l(()=>e("h4",{class:"pl-4 py-3 bg-gray-50 rounded-tl-md rounded-tr-md border-b border-b-gray-300 font-semibold"}," Refund Details ",-1)),F={class:"p-4 flex flex-col gap-3"},S={class:"capitalize text-[13px] text-gray-500"},V={class:"text-[14px] font-semibold block"},M={class:"bg-white lg:flex-1 md:flex-1 w-full rounded-md"},U=l(()=>e("div",{class:""},[e("h4",{class:"pl-4 bg-gray-50 py-3 rounded-tl-md rounded-tr-md border-b border-b-gray-300 font-semibold"}," Resolution ")],-1)),N={class:"p-4 flex flex-col gap-2"},H=l(()=>e("span",{class:"capitalize text-[13px] text-gray-500"},"Resolution Status",-1)),P=l(()=>e("span",{class:"capitalize text-[13px] text-gray-500"},"Conclusion",-1)),T={class:"text-[14px] font-semibold block"},W=l(()=>e("hr",null,null,-1)),q=l(()=>e("h4",{class:"font-medium text-sm"},"Resolution History",-1)),A={key:0,class:"flex gap-1 items-center mb-2"},E=l(()=>e("span",{class:"bg-primary block h-2 w-2 rounded-full"},null,-1)),K={class:"text-sm font-semibold"},L={class:"border block border-gray-100 p-2 rounded-md"},$={class:"text-xs flex items-center gap-1 text-gray-500 mb-1"},G={class:"text-sm"},J=["onClick"],O={class:"bg-gray-50 p-4 mt-5 rounded-md"},Q=l(()=>e("h4",{class:"text-sm font-semibold mb-2"},"Write a reply",-1)),X={class:"w-fit"},Y={key:0,class:"flex items-center gap-2"},Z={class:"text-gray-400 text-xs block"},j=l(()=>e("label",{for:"fileInput3",class:"file-label"},[e("span",{class:"text-primary-600 text-xs font-medium block"},"Replace")],-1)),ee={key:1,for:"fileInput3",class:"file-label"},te=l(()=>e("span",{class:"text-primary text-xs font-medium block"},"Upload Image",-1)),se=[te],oe={class:"text-right"},ie={class:"p-3"},le=["src"];function ne(t,s,ae,re,i,d){const u=f("i-icon"),x=f("vDialog");return r(),n("div",R,[e("div",z,[B,e("div",F,[(r(!0),n(_,null,h(i.itemData,(o,c)=>(r(),n("span",{key:c,class:"flex flex-col"},[e("span",S,a(c.split("_").join(" ")),1),e("span",V,a(o),1)]))),128))])]),e("div",M,[U,e("div",N,[e("span",null,[H,e("span",{class:y(["break-keep block w-fit status",i.item.status==0?"pending":"open"])},a(i.item.status==0?"pending":"resolved"),3)]),e("span",null,[P,e("span",T,a(i.item.conclusion||"---"),1)]),W,q,(r(!0),n(_,null,h(i.item.disputes,(o,c)=>(r(),n("span",{key:c},[o.user?(r(),n("div",A,[E,e("h4",K,a(`${o.user.firstname} ${o.user.lastname}`),1)])):g("",!0),e("span",L,[e("span",$,[m(u,{icon:"fluent-mdl2:date-time"}),p(" "+a(t.$formatDate(o.created_at)),1)]),e("h5",G,a(o.reason),1),o.image?(r(),n("span",{key:0,onClick:de=>d.openModal(o),role:"button",class:"text-xs text-primary flex items-center gap-1 mt-1"},[m(u,{icon:"icomoon-free:attachment"}),p(" View Attachment")],8,J)):g("",!0)])]))),128)),e("div",O,[Q,v(e("textarea",{class:"input",name:"",id:"","onUpdate:modelValue":s[0]||(s[0]=o=>i.content=o)},null,512),[[k,i.content]]),e("div",X,[e("input",{type:"file",name:"file",id:"fileInput3",class:"hidden-input",onChange:s[1]||(s[1]=(...o)=>d.onChange&&d.onChange(...o)),ref:"file",accept:".png,.jpg,.jpeg"},null,544),i.image?(r(),n("div",Y,[e("span",Z,a(i.image.name)+" ("+a(d.formattedImageSize(i.image))+")",1),j,e("span",{class:"text-red-600 text-xs font-medium block",role:"button",onClick:s[2]||(s[2]=(...o)=>d.removeImage&&d.removeImage(...o))}," Remove ")])):(r(),n("label",ee,se))]),e("div",oe,[e("button",{class:"brand-btn-md text-sm brand-primary",onClick:s[3]||(s[3]=(...o)=>d.postReply&&d.postReply(...o))}," Post Reply ")])])])]),m(x,{visible:i.visible,"onUpdate:visible":s[4]||(s[4]=o=>i.visible=o),pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"}},modal:"",header:"Preview Image",style:{width:"30rem"}},{default:I(()=>[e("div",ie,[p(" Hello World "),e("img",{src:i.previewImage,alt:""},null,8,le)])]),_:1},8,["visible","pt"])])}const me=b(C,[["render",ne],["__scopeId","data-v-3e04b9e8"]]);export{me as default};
