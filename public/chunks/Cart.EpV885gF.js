import{_ as q,b as a,d as s,e as l,f as h,k as x,w as b,r as _,o as c,F as k,h as m,t as g,n as v,v as F,x as j}from"../entry/index.wkIW-Yay.js";const D={data(){return{items:[],loading:!1,isProductDetails:null}},methods:{getCartItems(){this.loading=!0,this.$user.cartList().then(e=>{console.log("data from products list:",e.data);let o=e.data.filter(r=>r.status),u=[];o.forEach(r=>{console.log(r);let n={...r.product,cart_id:r.id,offer_price:r.offer_price,quantity:r.quantity,session_id:r.session_id,status:r.status};u.push(n)}),this.$store.commit("auth/setCartCount"),this.items=u}).finally(()=>{this.loading=!1})},quantityFunc(e,o){e=="reduce"?(o.quantity--,this.updateCart(o)):(o.quantity++,this.updateCart(o))},updateCart(e){const o={quantity:e.quantity,offer_price:e.offer_price,product_id:e.id,_method:"put"};console.log(o),this.$user.updateCart({id:e.cart_id,payload:o}).then(()=>{})},returnTotal(e){var u=e.offer_price*e.quantity||1;return u},removeFromCart(e){this.$user.removeFromCart(e.cart_id).then(o=>{console.log(o),this.getCartItems()})},showProduct(e){console.log(e),this.$router.push(`/app/product/${e==null?void 0:e.id}`)},goToSeller(e){let o=e.shop,r=`${o==null?void 0:o.user.firstname}-${o==null?void 0:o.user.lastname}`.toLowerCase();this.$router.push(`/app/product/${r}/seller/${o.user_id}`)},openProductDetails(e){this.isProductDetails=this.isProductDetails===e?null:e},checkOut(){this.$router.push("/app/checkout")}},beforeMount(){this.getCartItems()},computed:{user(){return this.$store.getters["auth/getUser"]}}},P={class:"lg:page-bg md:page-bg body-content w-full"},T={class:"flex lg:flex-row md:flex-row flex-col gap-3 justify-between items-center"},V=s("h4",{class:"font-semibold text-lg"},"Cart",-1),E={class:"flex flex-col gap-4 mt-4"},I={key:0,class:"flex justify-center"},U={class:"text-center flex flex-col items-center gap-4"},B={class:"bg-accent block h-[200px] w-[200px] text-primary rounded-full flex justify-center items-center"},L=s("h5",null,"Your cart is Empty ðŸ˜¥",-1),O={class:"mt-5 flex flex-col"},S={class:"flex lg:flex-row md:flex-row flex-col gap-4 lg:col-span-3 md:col-span-3 col-span-2"},K={class:"relative"},M=["onClick","src"],N={key:0,class:"bg-secondary text-white shadow flex text-[12px] items-center rounded-[4px] absolute top-1 right-1 gap-[3px] px-[6px] py-[2px] w-fit"},z={key:1,class:"bg-white flex text-[10px] items-center text-primary rounded-[4px] absolute bottom-1 left-1 gap-[3px] px-[6px] py-[2px] w-fit"},Q={class:"tw-h-[250px] flex flex-col gap-2 justify-between"},R=["onClick"],Y={key:0,class:"text-[12px] block bg-primary text-white w-fit rounded-sm px-[6px] py-[2px] block"},A={class:"flex gap-6 items-center"},G=["onClick"],H=["onClick"],J={class:"flex gap-2"},W=["disabled","onClick"],X=["onUpdate:modelValue","onKeyup"],Z=["onClick","disabled"],tt={class:"text-right"},et={class:"font-semibold text-sm"},ot={key:0,class:"text-center mt-4"};function st(e,o,u,r,n,p){const i=_("i-icon"),C=_("el-skeleton-item"),w=_("el-skeleton");return c(),a("div",P,[s("div",T,[V,n.items.length>0&&!n.loading?(c(),a("span",{key:0,role:"button",class:"text-[13px] flex gap-1 text-primary items-center",onClick:o[0]||(o[0]=t=>e.$router.push("/app/marketplace"))},[l(i,{icon:"la:long-arrow-alt-left"}),h(" Explore ")])):x("",!0)]),l(w,{loading:n.loading,animated:""},{template:b(()=>[s("div",E,[(c(),a(k,null,m(4,t=>s("div",{key:t},[l(C,{variant:"image",style:{height:"100px","border-radius":"10px"}})])),64))])]),default:b(()=>[!n.loading&&n.items.length===0?(c(),a("div",I,[s("div",U,[s("span",B,[l(i,{icon:"emojione-monotone:shopping-cart",class:"text-[100px]"})]),L,s("div",null,[s("button",{class:"brand-btn-md text-sm brand-primary mx-auto w-fit flex gap-1 items-center",onClick:o[1]||(o[1]=t=>e.$router.push("/app/marketplace"))}," Explore ")])])])):x("",!0),s("div",O,[(c(!0),a(k,null,m(n.items,(t,$)=>{var f,y;return c(),a("div",{key:$,class:"border-b border-gray-200 py-6 last:border-none grid lg:grid-cols-5 md:grid-cols-5 grid-cols-2 gap-4 items-center"},[s("div",S,[s("div",K,[s("img",{role:"button",onClick:d=>e.$router.push(`/app/product/${t==null?void 0:t.id}`),src:e.imgUrl+"product/"+(t==null?void 0:t.main_image),alt:"",class:"w-full h-[100px] w-[100px] object-cover object-top"},null,8,M),(y=(f=t==null?void 0:t.shop)==null?void 0:f.user)!=null&&y.kv?(c(),a("span",N,[l(i,{icon:"mdi:user-tick"}),h(" verified ")])):x("",!0),t!=null&&t.is_featured?(c(),a("span",z,[l(i,{icon:"mdi:fire"}),h(" sponsored ")])):x("",!0)]),s("span",Q,[s("div",null,[s("h5",{class:"font-medium text-md",onClick:d=>e.$router.push(`/app/product/${t==null?void 0:t.id}`),role:"button"},g(t.name),9,R),t!=null&&t.condition?(c(),a("span",Y,g(t==null?void 0:t.condition.split("-").join(" ")),1)):x("",!0)]),s("span",A,[s("span",{class:"text-green-600 text-[13px] flex font-regular items-center gap-1",role:"button",onClick:d=>p.goToSeller(t)},[l(i,{icon:"material-symbols:store-outline"}),h(" "+g(t.shop.user.firstname+" "+t.shop.user.lastname),1)],8,G),s("span",{class:"text-red-600 text-[13px] flex font-regular items-center gap-1",role:"button",onClick:d=>p.removeFromCart(t)},[l(i,{icon:"mingcute:delete-2-line"}),h(" Remove ")],8,H)])])]),s("div",null,[s("span",J,[s("button",{class:v(["p-1 rounded-[5px] text-[12px]",[t.quantity==1?"text-gray-500 border-gray-300 border":"border border-primary text-primary bg-transparent"]]),role:"button",disabled:t.track_inventory==1,onClick:d=>p.quantityFunc("reduce",t)},[l(i,{icon:"ic:sharp-minus"})],10,W),F(s("input",{type:"number","onUpdate:modelValue":d=>t.quantity=d,disabled:"",onKeyup:d=>e.handleChangeQty(t),class:"rounded-lg text-[14px] outline-none text-center w-[30px] font-medium"},null,40,X),[[j,t.quantity]]),s("button",{class:v(["p-1 rounded-[5px] text-[12px]",[t.quantity>=t.track_inventory?"text-gray-500 border-gray-300 border":"border border-primary text-primary bg-transparent"]]),role:"button",onClick:d=>p.quantityFunc("increase",t),disabled:t.quantity>=t.track_inventory},[l(i,{icon:"ic:sharp-plus"})],10,Z)])]),s("div",tt,[s("span",et,g(e.$currencyFormat(p.returnTotal(t))),1)])])}),128))])]),_:1},8,["loading"]),!n.loading&&n.items.length>0?(c(),a("div",ot,[s("button",{onClick:o[2]||(o[2]=(...t)=>p.checkOut&&p.checkOut(...t)),class:"brand-btn-md brand-primary w-fit"}," Proceed to Checkout ")])):x("",!0)])}const nt=q(D,[["render",st]]);export{nt as default};
