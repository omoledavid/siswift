import{_,b as r,d as e,t as n,n as b,v as h,x as f,o as l}from"../entry/index.wkIW-Yay.js";const g={data(){return{items:[],loading:!1,item:{},ID:this.$route.params.id,price:"",quantity:1}},methods:{makeOffer(){let t={product_id:this.ID,quantity:this.quantity,offer_price:this.price||this.item.base_price};this.$user.addToCart(t).then(s=>{console.log(s.data.messages.conversation_id);let a=s.data.messages.conversation_id;this.startChat(a)})},startChat(t){let s="";function a(){return window.matchMedia("(max-width: 767px)").matches}a()?(console.log("You are using a mobile device"),s=`/app/message/m?chatId=${t}`):(console.log("You are using a desktop device"),s=`/app/messages/?chatId=${t}`),this.$router.push(s)},getProduct(){this.loading=!0,this.$products.getRecord(this.ID).then(t=>{console.log("data from products list:",t),this.item=t.data}).finally(()=>{this.loading=!1})}},watch:{price:{handler(t){Number(t)>+Number(this.item.base_price)&&(this.$toast.error("Offer Price cannot be higher than or equal to product actual price",{timeout:4e3}),this.price=Number(this.item.base_price)-1)},immediate:!0},quantity:{handler(t){t>this.item.track_inventory&&(this.$toast.error("Quantity cannot be above quantity available",{timeout:4e3}),this.quantity=1)},immediate:!1}},beforeMount(){this.getProduct()},computed:{user(){return this.$store.getters["auth/getUser"]},isDisabled(){var t;return JSON.parse((t=this.item)==null?void 0:t.bulk_price).length===0}}},y={class:"lg:page-bg md:page-bg lg:w-6/12 md:w-7/12 w-full mx-auto"},x=e("h4",{class:"font-semibold"},"Make Offer",-1),v=e("hr",{class:"my-4"},null,-1),k={key:0},q={key:1},O={class:"mb-3"},w={class:"flex gap-2"},D=["src"],M={class:"flex gap-[4px] flex-col"},I={class:"font-semibold block"},C={class:"block text-[13px] text-primary font-semibold"},N={class:"flex flex-col gap-2"},P=e("label",{for:"",class:"text-[14px]"},"Quantity",-1),U=["disabled"],A=e("label",{for:"",class:"text-[14px]"},"Amount",-1),B={class:"text-center mt-6"};function E(t,s,a,Q,i,c){var d,u,p,m;return l(),r("div",y,[x,v,i.loading?(l(),r("span",k," Retrieving Product Details ")):(l(),r("div",q,[e("div",O,[e("div",w,[e("img",{src:t.imgUrl+"product/"+((d=i.item)==null?void 0:d.main_image),alt:"",role:"button",class:"h-[60px] w-[65px] object-contain rounded-lg"},null,8,D),e("div",M,[e("span",I,n((u=i.item)==null?void 0:u.name),1),e("span",{class:b(["block text-[13px] text-primary font-semibold",i.price?"line-through":""])},n(`Actual Price: ${t.$currencyFormat(((p=i.item)==null?void 0:p.base_price)*i.quantity)}`),3),e("span",C,n(`Your Offer: ${t.$currencyFormat(i.price*i.quantity)}`),1)])])]),e("div",N,[e("div",null,[P,h(e("input",{type:"text",disabled:((m=i.item)==null?void 0:m.track_inventory)<=1,"onUpdate:modelValue":s[0]||(s[0]=o=>i.quantity=o),class:"input",placeholder:"Enter Quantity"},null,8,U),[[f,i.quantity]])]),e("div",null,[A,h(e("input",{type:"tel","onUpdate:modelValue":s[1]||(s[1]=o=>i.price=o),class:"input",placeholder:"Enter Offer Amount"},null,512),[[f,i.price]])])]),e("div",B,[e("button",{onClick:s[2]||(s[2]=(...o)=>c.makeOffer&&c.makeOffer(...o)),class:"brand-btn brand-primary px-[30px] py-[10px]"}," Make Offer ")])]))])}const Y=_(g,[["render",E]]);export{Y as default};
